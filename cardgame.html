<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Card Dealing & Dragâ€‘Drop Game</title>
  <style>
    body {
      background-color: #006400;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    #table {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
      min-height: 300px;
    }
    .card {
      width: 80px;
      height: 120px;
      margin: 8px;
      cursor: grab;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    #discard-pile {
      border: 3px dashed #fff;
      border-radius: 10px;
      width: 200px;
      height: 150px;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgba(255,255,255,0.1);
      font-weight: bold;
    }
    #deal-btn {
      background-color: #f9d71c;
      color: black;
      padding: 10px 25px;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    #deal-btn:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body>

  <h1>Card Dealing and Drag & Drop Assignment</h1>
  <button id="deal-btn">Deal Cards</button>

  <div id="table"></div>
  <div id="discard-pile">Discard Pile</div>

  <script>
    const suits = ['S', 'H', 'D', 'C'];
    const deck = [];
    suits.forEach(suit => {
      for (let i = 1; i <= 13; i++) {
        deck.push(`${suit}${i}.png`);
      }
    });

    let dealtCards = [];

    const table = document.getElementById('table');
    const discard = document.getElementById('discard-pile');
    const dealBtn = document.getElementById('deal-btn');

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    dealBtn.addEventListener('click', () => {
      table.innerHTML = '';
      dealtCards = [];
      const shuffled = shuffle([...deck]);

      for (let i = 0; i < 5; i++) {
        const cardFile = shuffled[i];
        dealtCards.push(cardFile);

        const img = document.createElement('img');
        img.src = `cards/${cardFile}`;
        img.classList.add('card');
        img.draggable = true;

        img.addEventListener('dragstart', (e) => {
          e.dataTransfer.setData('text/plain', cardFile);
          setTimeout(() => img.style.visibility = 'hidden', 0);
        });

        img.addEventListener('dragend', () => {
          img.style.visibility = 'visible';
        });

        table.appendChild(img);
      }
    });

    discard.addEventListener('dragover', (e) => {
      e.preventDefault();
      discard.style.backgroundColor = 'rgba(255,255,255,0.3)';
    });

    discard.addEventListener('dragleave', () => {
      discard.style.backgroundColor = 'rgba(255,255,255,0.1)';
    });

    discard.addEventListener('drop', (e) => {
      e.preventDefault();
      const cardFile = e.dataTransfer.getData('text/plain');
      discard.style.backgroundColor = 'rgba(255,255,255,0.1)';
      alert(`You discarded: ${cardFile}`);
      console.log(`Event triggered! Discarded ${cardFile}`);

      const cardImgs = document.querySelectorAll('.card');
      cardImgs.forEach(card => {
        if (card.src.includes(cardFile)) {
          card.remove();
        }
      });
    });
  </script>

</body>
</html>
